<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Fingerprint Robustness Lab</title>
    <link rel="icon" type="image/png" href="/static/img/home.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #1e1e1e;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        header {
            background: #2d2d2d;
            color: #ffffff;
            padding: 20px 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #3d3d3d;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 5px;
            color: #ffffff;
        }

        header p {
            color: #c8c8c8;
            opacity: 0.9;
        }

        .status-bar {
            background: #2d2d2d;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #3d3d3d;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4ade80;
        }

        .status-dot.error {
            background: #f87171;
        }

        .status-dot.warning {
            background: #fbbf24;
        }

        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .sidebar {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #3d3d3d;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .sidebar h2 {
            margin-bottom: 15px;
            font-size: 1.2em;
            color: #ffffff;
        }

        .sidebar h3 {
            font-size: 12px;
            text-transform: uppercase;
            color: #9ca3af;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .sidebar-status {
            margin-top: 15px;
            margin-bottom: 20px;
            padding: 10px;
            background: #1e1e1e;
            border-radius: 4px;
            font-size: 12px;
            color: #9ca3af;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-menu li {
            margin-bottom: 5px;
        }

        .nav-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            text-decoration: none;
            color: #c8c8c8;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .nav-menu a img {
            width: 20px;
            height: 20px;
            object-fit: contain;
            filter: brightness(0.7);
            transition: filter 0.2s;
        }

        .nav-menu a:hover {
            background: #3d3d3d;
            color: #ffffff;
        }

        .nav-menu a:hover img {
            filter: brightness(1);
        }

        .nav-menu a.active {
            background: #427eea;
            color: #ffffff;
        }

        .nav-menu a.active img {
            filter: brightness(1);
        }

        .content-area {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 30px;
            border: 1px solid #3d3d3d;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .content-area-full {
            min-height: 1400px;
        }

        .content-area-manipulate {
            min-height: 1200px;
        }

        .content-area-manipulate-with-results {
            min-height: 1400px;
        }

        .dashboard-content-area {
            min-height: auto;
        }

        .section {
            display: none;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            margin-bottom: 20px;
            color: #ffffff;
            border-bottom: 2px solid #427eea;
            padding-bottom: 10px;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .workflow-step {
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: visible;
        }

        /* Remove scroll from specific workflow steps in Manipulate Audio section */
        /* Target "1. Load Audio File" (first workflow-step) and "3. Test Fingerprint Robustness" (second workflow-step) */
        .manipulate-right-panel > .workflow-step:first-of-type,
        .manipulate-right-panel > .workflow-step:nth-of-type(2) {
            overflow: visible !important;
            overflow-x: hidden !important;
            overflow-y: visible !important;
            max-height: none !important;
            height: auto !important;
        }

        /* Also ensure audio-players-container doesn't cause scroll */
        .manipulate-right-panel .audio-players-container {
            overflow: visible;
            overflow-y: visible;
        }

        .workflow-step h3 {
            margin-bottom: 15px;
            color: #ffffff;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #ffffff;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            max-width: 100%;
            padding: 8px 12px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            font-size: 14px;
            color: #ffffff;
            box-sizing: border-box;
        }

        .form-group select option {
            white-space: normal;
            word-wrap: break-word;
            padding: 8px;
            max-width: 100%;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #427eea;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            color: #9ca3af;
            font-size: 12px;
        }

        /* Slider Styles */
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            border: none !important;
        }

        .slider-wrapper {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            height: 18px;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: transparent;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
            padding: 0;
            position: relative;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 9px;
            background: #ffffff;
            border: 2px solid #60a5fa;
            cursor: pointer;
            margin-top: -6px;
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 9px;
            background: #ffffff;
            border: 2px solid #60a5fa;
            cursor: pointer;
            appearance: none;
            -moz-appearance: none;
        }

        .slider::-webkit-slider-runnable-track {
            height: 6px;
            background: #60a5fa;
            border-radius: 3px;
            border: none;
            outline: none;
        }

        .slider::-moz-range-track {
            height: 6px;
            background: #60a5fa;
            border-radius: 3px;
            border: none;
            outline: none;
        }

        .slider-value {
            min-width: 50px;
            color: #ffffff;
            font-size: 14px;
            text-align: right;
        }

        .btn {
            background: #427eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #3464ba;
        }

        .btn:disabled {
            background: #3d3d3d;
            color: #787878;
            cursor: not-allowed;
        }

        .btn-danger {
            background: #f87171;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-success {
            background: #10b981;
        }

        .btn-success:hover {
            background: #059669;
        }

        .log-container {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid #3d3d3d;
        }

        .log-line {
            margin-bottom: 5px;
            line-height: 1.5;
        }

        .log-line.error {
            color: #f87171;
        }

        .log-line.success {
            color: #10b981;
        }

        .log-line.warning {
            color: #fbbf24;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            border: 1px solid #3d3d3d;
        }

        .progress-fill {
            height: 100%;
            background: #427eea;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .file-list {
            list-style: none;
            margin-top: 10px;
        }

        .file-list li {
            padding: 10px;
            background: #1e1e1e;
            margin-bottom: 5px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #3d3d3d;
        }

        .file-list li:hover {
            background: #3d3d3d;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            display: table;
            min-width: 600px;
        }

        .table-wrapper {
            width: 100%;
            max-width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            display: block;
            margin: 10px 0;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #3d3d3d;
            white-space: nowrap;
        }

        .table td:last-child,
        .table th:last-child {
            white-space: normal;
        }

        .table th {
            background: #1e1e1e;
            font-weight: 600;
            color: #ffffff;
        }

        .table tr:hover {
            background: #1e1e1e;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background: #10b981;
            color: white;
        }

        .badge-error {
            background: #f87171;
            color: white;
        }

        .badge-warning {
            background: #fbbf24;
            color: white;
        }

        .badge-info {
            background: #60a5fa;
            color: white;
        }

        .upload-area {
            border: 2px dashed #3d3d3d;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 15px;
            background: #1e1e1e;
        }

        .upload-area:hover {
            border-color: #427eea;
            background: #252525;
        }

        .upload-area.dragover {
            border-color: #427eea;
            background: #252525;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
            color: #427eea;
        }

        .stat-card p {
            color: #c8c8c8;
            font-size: 0.9em;
        }

        /* Transform Tabs Interface */
        .transform-tabs-container {
            margin-top: 20px;
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }

        .transform-tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid #1A1A2E;
            margin-bottom: 0;
            padding: 0;
            width: 100%;
            max-width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
        }

        .transform-tabs::-webkit-scrollbar {
            height: 4px;
        }

        .transform-tabs::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .transform-tabs::-webkit-scrollbar-thumb {
            background: #427eea;
            border-radius: 2px;
        }

        .transform-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            color: #9ca3af;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            position: relative;
            top: 2px;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: fit-content;
        }

        .transform-tab:hover {
            color: #ffffff;
            background: rgba(34, 210, 230, 0.1);
        }

        .transform-tab.active {
            background: #22D2E6;
            color: #ffffff;
            font-weight: 600;
            border-bottom: 2px solid #22D2E6;
        }

        .transform-tab-content {
            display: none;
            background: #1A1A2E;
            padding: 20px;
            border-radius: 0 8px 8px 8px;
            margin-top: 0;
        }

        .transform-tab-content.active {
            display: block;
        }

        .transform-group-panel {
            background: #282A40;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(34, 210, 230, 0.2);
        }

        .transform-group-panel:last-child {
            margin-bottom: 0;
        }

        .transform-group-panel h4 {
            color: #ffffff;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(156, 163, 175, 0.2);
        }

        /* Transform Control Groups */
        .transform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .transform-card {
            border: 1px solid rgba(34, 210, 230, 0.1);
            padding: 15px;
            border-radius: 6px;
            background: rgba(40, 42, 64, 0.5);
        }

        .transform-card h4 {
            margin-bottom: 15px;
            color: #ffffff;
        }

        .transform-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .transform-card-header h4 {
            margin: 0;
            flex: 1;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .transform-card-header .enable-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .transform-card-header .enable-checkbox input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .transform-card-header .enable-checkbox label {
            margin: 0;
            color: #ffffff;
            font-weight: 500;
            font-size: 14px;
        }

        /* Audio Player Styles */
        .audio-player {
            width: 100%;
            margin-top: 10px;
        }

        audio {
            width: 100%;
        }

        /* Test Results */
        .test-results {
            margin-top: 15px;
            padding: 15px;
            background: #1e1e1e;
            border-radius: 5px;
            border: 1px solid #3d3d3d;
        }

        .test-results.success {
            border-color: #10b981;
            color: #10b981;
        }

        .test-results.error {
            border-color: #f87171;
            color: #f87171;
        }

        /* Deliverables Styles */
        .deliverable-card {
            transition: all 0.3s ease;
        }

        .deliverable-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 126, 234, 0.3);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .table th,
        .table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #3d3d3d;
        }

        .table th {
            background: #2d2d2d;
            color: #ffffff;
            font-weight: 600;
        }

        .table tr:hover {
            background: #2d2d2d;
        }

        /* ComboBox/Select Styles */
        select {
            background: #1e1e1e;
            color: #ffffff;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            padding: 8px 12px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        select option {
            white-space: normal;
            word-wrap: break-word;
            padding: 8px;
            max-width: 100%;
        }

        select:hover {
            border-color: #427eea;
        }

        select:focus {
            outline: none;
            border-color: #427eea;
        }

        /* Checkbox Styles */
        input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        /* Audio Player Styles */
        .audio-player-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .play-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: #427eea;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .play-button:hover {
            background: #3464ba;
        }

        .play-button:disabled {
            background: #3d3d3d;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .time-label {
            color: #ffffff;
            font-size: 12px;
            min-width: 80px;
            text-align: right;
        }

        /* Waveform Visualization */
        .waveform-container {
            width: 100%;
            height: 100px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .waveform-placeholder {
            color: #9ca3af;
            font-size: 12px;
            text-align: center;
        }

        .waveform-visualization {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .waveform-bars {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2px;
            height: 80%;
            width: 95%;
        }

        .waveform-bar {
            background: #427eea;
            width: 3px;
            min-height: 4px;
            border-radius: 2px;
            transition: height 0.1s;
        }

        /* Transform Subsections */
        .transform-subsection {
            margin-bottom: 30px;
        }

        .transform-subsection h4 {
            font-size: 14px;
            text-transform: uppercase;
            color: #9ca3af;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #3d3d3d;
            padding-bottom: 8px;
        }

        /* File Select with Clear Button */
        .file-select-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .file-select-container select {
            flex: 1;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .file-select-container select option {
            white-space: normal;
            word-wrap: break-word;
            padding: 8px;
            max-width: 100%;
        }

        .clear-btn {
            background: #3d3d3d;
            color: #ffffff;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .clear-btn:hover {
            background: #4d4d4d;
        }

        /* Upload Area with Cloud Icon */
        .upload-area-cloud {
            font-size: 48px;
            color: #9ca3af;
            margin-bottom: 10px;
        }

        .upload-area-cloud img {
            width: 64px;
            height: 64px;
            display: block;
            margin: 0 auto;
            opacity: 0.8;
        }

        /* Test Results Log */
        .test-results-log {
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #d4d4d4;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .test-results-log .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #2d2d2d;
        }

        .test-results-log .log-entry:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .log-timestamp {
            color: #9ca3af;
            margin-right: 10px;
        }

        /* Manipulate Section - Two Column Layout */
        .manipulate-container {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 20px;
            height: calc(100vh + 200px);
            min-height: 600px;
        }

        /* Left: Scrollable Transform Controls */
        .manipulate-left-panel {
            background: #1A1A2E;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
            border: 1px solid rgba(34, 210, 230, 0.2);
        }

        .manipulate-left-panel::-webkit-scrollbar {
            width: 8px;
        }

        .manipulate-left-panel::-webkit-scrollbar-track {
            background: #1A1A2E;
        }

        .manipulate-left-panel::-webkit-scrollbar-thumb {
            background: #22D2E6;
            border-radius: 4px;
        }

        .manipulate-left-panel::-webkit-scrollbar-thumb:hover {
            background: #1fb8c9;
        }

        .manipulate-left-panel .transform-subsection {
            margin-bottom: 25px;
        }

        .manipulate-left-panel .transform-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .manipulate-left-panel .transform-card {
            padding: 12px;
        }

        /* Right: Audio Playback Interface */
        .manipulate-right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: #1A1A2E;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid rgba(34, 210, 230, 0.2);
            overflow: visible;
            overflow-y: visible;
        }

        /* Transport & Project Controls */
        .transport-controls {
            background: #282A40;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(34, 210, 230, 0.2);
        }

        .transport-controls h4 {
            color: #ffffff;
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .transport-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .transport-btn {
            width: 45px;
            height: 45px;
            border-radius: 6px;
            border: none;
            background: #22D2E6;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-weight: 600;
        }

        .transport-btn:hover {
            background: #1fb8c9;
            transform: scale(1.05);
        }

        .transport-btn.active {
            background: #ffffff;
            color: #1A1A2E;
        }

        .transport-btn.secondary {
            background: #282A40;
            border: 1px solid rgba(34, 210, 230, 0.3);
        }

        .transport-btn.secondary:hover {
            background: #353755;
        }

        .transport-controls-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }

        .volume-control,
        .tempo-control {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .volume-control label,
        .tempo-control label {
            color: #9ca3af;
            font-size: 12px;
            min-width: 60px;
        }

        .volume-slider {
            flex: 1;
            height: 6px;
            background: #3d3d3d;
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #22D2E6;
            cursor: pointer;
        }

        .tempo-input {
            width: 80px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            padding: 6px 10px;
            color: #ffffff;
            font-size: 14px;
            text-align: center;
        }

        .tempo-label {
            color: #9ca3af;
            font-size: 12px;
        }

        /* Audio Players - Revamped */
        .audio-players-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .audio-player-panel {
            background: #282A40;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(34, 210, 230, 0.2);
        }

        .audio-player-panel h4 {
            color: #ffffff;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .audio-player-status {
            color: #9ca3af;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .audio-player-waveform {
            width: 100%;
            height: 120px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .audio-player-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-play-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: #22D2E6;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .audio-play-btn:hover {
            background: #1fb8c9;
        }

        .audio-play-btn:disabled {
            background: #3d3d3d;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .audio-time-display {
            color: #ffffff;
            font-size: 12px;
            font-family: monospace;
        }

        /* Waveform Editor */
        .waveform-editor {
            background: #282A40;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(34, 210, 230, 0.2);
        }

        .waveform-editor h4 {
            color: #ffffff;
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .waveform-tracks {
            background: #1e1e1e;
            border-radius: 4px;
            padding: 10px;
            min-height: 400px;
            height: calc(100% - 60px);
            position: relative;
            overflow: hidden;
        }

        .waveform-track {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-bottom: 1px solid #3d3d3d;
            min-height: 60px;
        }

        .waveform-track:last-child {
            border-bottom: none;
        }

        .track-controls {
            display: flex;
            gap: 5px;
        }

        .track-control-btn {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            border: 1px solid #3d3d3d;
            background: #282A40;
            color: #9ca3af;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .track-control-btn:hover {
            background: #353755;
            border-color: #22D2E6;
        }

        .track-label {
            min-width: 200px;
            color: #ffffff;
            font-size: 12px;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .track-waveform-area {
            flex: 1;
            height: 40px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .playhead {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #22D2E6;
            z-index: 10;
            pointer-events: none;
        }

        .waveform-zoom-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: rgba(30, 30, 30, 0.8);
            border-top: 1px solid #3d3d3d;
            margin-top: 10px;
        }

        .zoom-btn {
            padding: 6px 12px;
            background: #282A40;
            border: 1px solid rgba(34, 210, 230, 0.3);
            border-radius: 4px;
            color: #ffffff;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .zoom-btn:hover {
            background: #353755;
            border-color: #22D2E6;
        }

        .time-range-display {
            color: #ffffff;
            font-family: monospace;
            font-size: 12px;
        }

        /* Frequency Visualization */
        .frequency-display {
            background: #282A40;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(34, 210, 230, 0.2);
            height: 200px;
        }

        .frequency-display h4 {
            color: #ffffff;
            font-size: 14px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .frequency-canvas-container {
            width: 100%;
            height: 150px;
            background: #1e1e1e;
            border: 1px solid #3d3d3d;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .frequency-canvas {
            width: 100%;
            height: 100%;
        }

        /* Mobile Responsive Styles */
        @media(max-width: 968px) {
            * {
                max-width: 100%;
            }

            html, body {
                overflow-x: hidden;
                width: 100%;
            }

            .container {
                padding: 10px;
                width: 100%;
                max-width: 100%;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .sidebar {
                position: static;
                padding: 15px;
                margin-bottom: 15px;
            }

            .sidebar h2, .sidebar h3 {
                font-size: 14px;
            }

            .nav-menu a {
                padding: 10px 12px;
                font-size: 13px;
            }

            .nav-menu a img {
                width: 18px;
                height: 18px;
            }

            .content-area {
                padding: 15px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .manipulate-container {
                display: flex;
                flex-direction: column;
                height: auto;
                min-height: auto;
                gap: 15px;
            }

            /* Reorder sections for correct mobile display: 1, 2, 3, 4 */
            /* Use display: contents to allow children to participate in parent flex ordering */
            .manipulate-right-panel {
                display: contents;
                background: transparent;
                border: none;
                padding: 0;
                border-radius: 0;
            }

            /* Preserve styling for right panel children when using display: contents */
            .manipulate-right-panel > .workflow-step,
            .manipulate-right-panel > .audio-players-container {
                background: #1A1A2E;
                border-radius: 8px;
                padding: 20px;
                border: 1px solid rgba(34, 210, 230, 0.2);
                margin-bottom: 20px;
            }

            /* Order: 1. Load Audio File - MUST be first (first child of right panel) */
            .manipulate-container .manipulate-right-panel > .workflow-step:first-child {
                order: 1 !important;
            }

            /* Order: Audio Players (second child of right panel) */
            .manipulate-container .manipulate-right-panel > .audio-players-container {
                order: 2 !important;
            }

            /* Order: 2. Apply Transforms (left panel) */
            .manipulate-container .manipulate-left-panel {
                order: 3 !important;
                max-height: none;
                padding: 15px;
            }

            /* Order: 3. Test Fingerprint Robustness (third child of right panel) */
            .manipulate-container .manipulate-right-panel > .workflow-step:nth-child(3) {
                order: 4 !important;
            }

            /* Order: 4. Test Results (fourth child of right panel) - MUST be last */
            .manipulate-container .manipulate-right-panel > .workflow-step:nth-child(4) {
                order: 5 !important;
            }


            .transform-grid {
                grid-template-columns: 1fr !important;
            }

            .transform-tabs-container {
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .transform-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .transform-tab {
                padding: 10px 14px;
                font-size: 13px;
                white-space: nowrap;
            }

            .table-wrapper {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch;
            }

            .table {
                min-width: 600px;
            }

            .stats-grid {
                grid-template-columns: 1fr !important;
            }

            header {
                padding: 15px;
            }

            header h1 {
                font-size: 1.5em;
            }

            .workflow-step {
                padding: 15px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            .btn {
                padding: 10px 15px;
                font-size: 13px;
            }

            .upload-area {
                padding: 30px 15px;
            }

            .transform-card {
                padding: 12px;
            }

            .transform-card h4 {
                font-size: 14px;
            }

            .slider-container {
                margin: 10px 0;
            }

            select, input[type="text"], input[type="number"] {
                padding: 8px 10px;
                font-size: 13px;
            }
        }

        @media(max-width: 640px) {
            html, body {
                overflow-x: hidden;
                width: 100%;
            }

            .container {
                padding: 8px;
                width: 100%;
                max-width: 100%;
            }

            .sidebar {
                padding: 12px;
            }

            .content-area {
                padding: 12px;
            }

            header {
                padding: 12px;
            }

            header h1 {
                font-size: 1.3em;
            }

            .nav-menu a {
                padding: 8px 10px;
                font-size: 12px;
            }

            .nav-menu a img {
                width: 16px;
                height: 16px;
            }

            .manipulate-left-panel {
                padding: 12px;
            }

            .transform-card {
                padding: 10px;
            }

            .btn {
                padding: 8px 12px;
                font-size: 12px;
                width: 100%;
            }

            .upload-area {
                padding: 20px 10px;
            }

            .upload-area-cloud img {
                width: 48px;
                height: 48px;
            }

            .workflow-step h3 {
                font-size: 16px;
            }

            .form-group label {
                font-size: 13px;
            }

            select, input[type="text"], input[type="number"] {
                padding: 6px 8px;
                font-size: 12px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            select option {
                white-space: normal;
                word-wrap: break-word;
                padding: 6px;
                font-size: 12px;
            }

            .slider {
                width: 100%;
            }

            .progress-indicators {
                flex-direction: column;
                gap: 24px;
            }

            .file-select-container {
                flex-direction: column;
            }

            .file-select-container select {
                width: 100%;
                margin-bottom: 10px;
            }

            .clear-btn {
                width: 100%;
            }

            .audio-players-container {
                flex-direction: column;
            }

            .audio-player-panel {
                width: 100%;
            }

            .test-results-log {
                font-size: 11px;
                padding: 10px;
            }

            .content-area-full,
            .content-area-manipulate,
            .content-area-manipulate-with-results {
                min-height: auto !important;
            }

            .manipulate-right-panel {
                padding: 12px;
            }

            .transform-subsection {
                margin-bottom: 15px;
            }

            .transform-subsection h4 {
                font-size: 13px;
            }

            .transform-card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .transform-card-header h4 {
                font-size: 13px;
            }

            .workflow-step {
                padding: 12px;
            }

            .workflow-step h3 {
                font-size: 15px;
            }

            .slider-wrapper {
                width: 100%;
            }

            .slider-value {
                font-size: 11px;
            }

            .test-results-log {
                max-height: 200px;
            }

            h2, h3, h4 {
                word-break: break-word;
                overflow-wrap: break-word;
                hyphens: auto;
            }

            h2 {
                font-size: 1.3em;
            }

            h3 {
                font-size: 1.1em;
            }

            h4 {
                font-size: 0.95em;
            }

            p, label, span {
                word-break: break-word;
                overflow-wrap: break-word;
            }

            .table-wrapper {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto !important;
                overflow-y: hidden !important;
                -webkit-overflow-scrolling: touch;
                display: block;
                margin: 10px 0;
            }

            table,
            .table {
                font-size: 11px;
                width: 100%;
                min-width: 600px;
                display: table;
                border-collapse: collapse;
            }

            table th,
            table td,
            .table th,
            .table td {
                padding: 8px 6px;
                white-space: nowrap;
                font-size: 11px;
            }

            .table td:last-child,
            .table th:last-child {
                white-space: normal;
                min-width: 60px;
            }

            /* Ensure all text elements wrap properly on mobile */
            .workflow-step *,
            .deliverable-card *,
            .section * {
                max-width: 100%;
                box-sizing: border-box;
            }

            .workflow-step,
            .section,
            .content-area,
            .content-area-full,
            .content-area-manipulate,
            .content-area-manipulate-with-results {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: hidden !important;
            }

            .daw-upload-area {
                padding: 30px 15px;
            }

            .workflow-step h3 {
                font-size: 16px;
            }

            .workflow-step p {
                font-size: 11px;
            }

            .transform-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .transform-tab {
                padding: 10px 16px;
                font-size: 12px;
                white-space: nowrap;
            }

            .table-wrapper {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch;
            }

            .table {
                min-width: 600px;
            }
        }

        @media(max-width: 480px) {
            html, body {
                overflow-x: hidden;
                width: 100%;
            }

            .container {
                padding: 5px;
                width: 100%;
                max-width: 100%;
            }

            .sidebar {
                padding: 10px;
            }

            .content-area {
                padding: 10px;
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            header {
                padding: 10px;
            }

            header h1 {
                font-size: 1.2em;
            }

            .nav-menu a {
                padding: 6px 8px;
                font-size: 11px;
            }

            .btn {
                padding: 6px 10px;
                font-size: 11px;
            }

            .upload-area {
                padding: 15px 8px;
            }

            .transform-card {
                padding: 8px;
            }

            .workflow-step {
                padding: 10px;
            }

            select, input[type="text"], input[type="number"] {
                padding: 5px 6px;
                font-size: 11px;
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            select option {
                white-space: normal;
                word-wrap: break-word;
                padding: 6px;
                font-size: 11px;
            }

            .transform-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .transform-tab {
                padding: 8px 12px;
                font-size: 11px;
                white-space: nowrap;
            }

            .table-wrapper {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch;
            }

            .table {
                min-width: 500px;
                font-size: 10px;
            }

            .table th,
            .table td {
                padding: 6px 8px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="status-bar" style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: #2d2d2d; border-radius: 8px; margin-bottom: 20px; border: 1px solid #3d3d3d;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="/static/img/home.png" alt="Audiolab" style="width: 24px; height: 24px;">
                <h1 style="margin: 0; font-size: 18px; color: #ffffff;">Audiolab</h1>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">System Ready</span>
                </div>
                <span style="color: #9ca3af;">|</span>
                <div id="currentProcess" style="color: #9ca3af; font-size: 12px;"></div>
            </div>
        </div>

        <div class="main-content">
            <script>
                // Define showSection immediately before navigation menu to ensure it's available
                function showSection(sectionId, eventElement) {
                    try { // Hide all sections
                        const allSections = document.querySelectorAll('.section');
                        allSections.forEach(function(s) {
                            s.classList.remove('active');
                        });

                        // Show selected section
                        const targetSection = document.getElementById(sectionId);
                        if (!targetSection) {
                            console.error('Section not found:', sectionId);
                            return;
                        }
                        targetSection.classList.add('active');

                        // Update active nav item
                        const navLinks = document.querySelectorAll('.nav-menu a');
                        navLinks.forEach(function(a) {
                            a.classList.remove('active');
                        });

                        if (eventElement) {
                            eventElement.classList.add('active');
                        } else {
                            navLinks.forEach(function(a) {
                                const onclick = a.getAttribute('onclick');
                                if (onclick && onclick.indexOf(sectionId) !== -1) {
                                    a.classList.add('active');
                                }
                            });
                        }

                        // Load section-specific data (will be handled by app.js when it loads)
                        if (typeof window.loadSectionData === 'function') {
                            window.loadSectionData(sectionId);
                        }
                    } catch (error) {
                        console.error('Error in showSection:', error);
                    }
                }
                // Make globally accessible
                window.showSection = showSection;
            </script>
            <div class="sidebar">
                <div class="sidebar-logo">
                    <img src="/static/img/home.png" alt="AudioLab" style="width: 24px; height: 24px; margin-right: 8px;">
                    <h2 style="margin: 0; display: inline; font-size: 18px;">AudioLab</h2>
                </div>
                <div class="sidebar-status" style="margin-top: 15px; margin-bottom: 20px; padding: 10px; background: #1e1e1e; border-radius: 4px; font-size: 12px; color: #9ca3af;">
                    <span id="sidebarStatusText">1 process(es) running</span>
                </div>
                <h3 style="font-size: 12px; text-transform: uppercase; color: #9ca3af; margin-bottom: 10px; letter-spacing: 1px;">NAVIGATION</h3>
                <ul class="nav-menu">
                    <li>
                        <a href="#" onclick="showSection('manipulate', this); return false;"><img src="/static/img/manipulate.png" alt="Manipulate Audio">Manipulate Audio</a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('deliverables', this); return false;" class="active"><img src="/static/img/deliverable.png" alt="Deliverables">Deliverables</a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('dashboard', this); return false;"><img src="/static/img/dashboard.png" alt="Dashboard">Dashboard</a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('daw', this); return false;"><img src="/static/img/gear.png" alt="DAW Parser">DAW Parser</a>
                    </li>
                </ul>
            </div>

            <div class="content-area">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section">
                    <h2 style="word-break: break-word; overflow-wrap: break-word;">Dashboard</h2>
                    <div class="stats-grid" id="dashboardStats"></div>
                    <div id="recentRuns"></div>
                </div>

                <!-- Audio Manipulation Section - Redesigned Two-Column Layout -->
                <div id="manipulate" class="section">
                    <div class="manipulate-container">
                        <!-- Left Panel: Scrollable Transform Controls -->
                        <div class="manipulate-left-panel">
                            <h3 style="color: #22D2E6; margin-bottom: 20px; font-size: 18px;">2. Apply Transforms</h3>

                            <!-- Core Adjustments -->
                            <div class="transform-subsection">
                                <h4>Core Adjustments</h4>
                                <div class="transform-grid">
                                    <!-- Speed Control -->
                                    <div class="transform-card">
                                        <h4>
                                            Speed Change</h4>
                                        <div class="form-group">
                                            <label>Ratio</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="speedSlider" min="50" max="200" value="100" oninput="updateSpeedValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="speedValue">1x</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <input type="checkbox" id="preservePitch">
                                                Preserve Pitch
                                            </label>
                                        </div>
                                        <button class="btn" onclick="applyTransform('speed')">Apply Speed Change</button>
                                    </div>

                                    <!-- Pitch Control -->
                                    <div class="transform-card">
                                        <h4>
                                            Pitch Shift</h4>
                                        <div class="form-group">
                                            <label>Semitones</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="pitchSlider" min="-12" max="12" value="0" oninput="updatePitchValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="pitchValue">0 semitones</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('pitch')">Apply Pitch Shift</button>
                                    </div>

                                    <!-- Reverb -->
                                    <div class="transform-card">
                                        <h4>
                                            Reverb Delay</h4>
                                        <div class="form-group">
                                            <label>Delay</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="reverbSlider" min="0" max="500" value="50" oninput="updateReverbValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="reverbValue">50 ms</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('reverb')">Apply Reverb</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtering & Dynamics -->
                            <div class="transform-subsection">
                                <h4>Filtering & Dynamics</h4>
                                <div class="transform-grid">
                                    <!-- Noise Reduction -->
                                    <div class="transform-card">
                                        <h4>
                                            Noise Reduction</h4>
                                        <div class="form-group">
                                            <label>Reduction</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="noiseSlider" min="0" max="100" value="50" oninput="updateNoiseValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="noiseValue">50%</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('noise')">Apply Noise-Reduction</button>
                                    </div>

                                    <!-- EQ Adjustment -->
                                    <div class="transform-card">
                                        <h4>
                                            EQ Adjustment</h4>
                                        <div class="form-group">
                                            <label>Gain</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="eqSlider" min="-20" max="20" value="0" oninput="updateEQValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="eqValue">0 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('eq')">Apply EQ</button>
                                    </div>

                                    <!-- Audio Compression -->
                                    <div class="transform-card">
                                        <h4>
                                            Audio Compression</h4>
                                        <div class="form-group">
                                            <label>Codec</label>
                                            <select id="codecSelect" onchange="const bitrateSelect = document.getElementById('bitrateSelect'); if (bitrateSelect) bitrateSelect.disabled = this.value === 'None';">
                                                <option value="None">None</option>
                                                <option value="MP3" selected>MP3</option>
                                                <option value="AAC">AAC</option>
                                                <option value="OGG">OGG</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Bitrate</label>
                                            <select id="bitrateSelect">
                                                <option value="64k">64k</option>
                                                <option value="128k">128k</option>
                                                <option value="192k">192k</option>
                                                <option value="256k">256k</option>
                                                <option value="320k">320k</option>
                                            </select>
                                        </div>
                                        <button class="btn" onclick="applyTransform('compression')">Apply Compression</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Frequency & Overlay -->
                            <div class="transform-subsection">
                                <h4>Frequency & Overlay</h4>
                                <div class="transform-grid">
                                    <!-- Overlay Vocals -->
                                    <div class="transform-card">
                                        <h4>
                                            Overlay/Mixing</h4>
                                        <div class="form-group">
                                            <label>Overlay Audio File (optional)</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <button class="clear-btn" onclick="document.getElementById('overlayFile').click()" style="flex: 1; text-align: left;">Choose File</button>
                                                <span id="overlayFileName" style="font-size: 12px; color: #9ca3af;">No file chosen</span>
                                            </div>
                                            <input type="file" id="overlayFile" accept="audio/*" style="display: none;" onchange="updateOverlayFileName()">
                                            <small>Leave empty to generate test overlay</small>
                                        </div>
                                        <div class="form-group">
                                            <label>Gain</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="overlayGainSlider" min="-20" max="0" value="-5" oninput="updateOverlayGainValue(this.value)">
                                                </div>
                                                <span class="slider-value" id="overlayGainValue">-5 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('overlay')">Apply Overlay</button>
                                    </div>

                                    <!-- High-Pass Filter -->
                                    <div class="transform-card">
                                        <h4>
                                            High-Pass Filter</h4>
                                        <div class="form-group">
                                            <label>Cutoff</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="highpassSlider" min="50" max="5000" value="150" oninput="updateSliderDisplay('highpass', this.value)">
                                                </div>
                                                <span class="slider-value" id="highpassDisplay">150 Hz</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('highpass')">Apply High-Pass</button>
                                    </div>

                                    <!-- Low-Pass Filter -->
                                    <div class="transform-card">
                                        <h4>Low-Pass Filter</h4>
                                        <div class="form-group">
                                            <label>Cutoff</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="lowpassSlider" min="500" max="20000" value="6000" oninput="updateSliderDisplay('lowpass', this.value)">
                                                </div>
                                                <span class="slider-value" id="lowpassDisplay">6000 Hz</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('lowpass')">Apply Low-Pass</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Advanced & Specialized -->
                            <div class="transform-subsection">
                                <h4>Advanced & Specialized</h4>
                                <div class="transform-grid">
                                    <!-- Boost Highs -->
                                    <div class="transform-card">
                                        <h4>
                                            Boost Highs</h4>
                                        <div class="form-group">
                                            <label>Gain</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="boostHighsSlider" min="0" max="20" value="6" oninput="updateSliderDisplay('boostHighs', this.value)">
                                                </div>
                                                <span class="slider-value" id="boostHighsDisplay">6 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('boostHighs')">Apply Boost Highs</button>
                                    </div>

                                    <!-- Boost Lows -->
                                    <div class="transform-card">
                                        <h4>
                                            Boost Lows</h4>
                                        <div class="form-group">
                                            <label>Gain</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="boostLowsSlider" min="0" max="20" value="6" oninput="updateSliderDisplay('boostLows', this.value)">
                                                </div>
                                                <span class="slider-value" id="boostLowsDisplay">6 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('boostLows')">Apply Boost Lows</button>
                                    </div>

                                    <!-- Telephone Filter -->
                                    <div class="transform-card">
                                        <h4>
                                            Telephone Filter</h4>
                                        <p style="color: #9ca3af; font-size: 12px; margin: 10px 0;">Band-pass filter (300-3000 Hz)</p>
                                        <button class="btn" onclick="applyTransform('telephone')">Apply Telephone Fil</button>
                                    </div>

                                    <!-- Limiting -->
                                    <div class="transform-card">
                                        <h4>
                                            Limiting</h4>
                                        <div class="form-group">
                                            <label>Threshold</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="limitingSlider" min="-10" max="0" value="-1" oninput="updateSliderDisplay('limiting', this.value)">
                                                </div>
                                                <span class="slider-value" id="limitingDisplay">-1 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('limiting')">Apply Limiting</button>
                                    </div>

                                    <!-- Multiband Compression -->
                                    <div class="transform-card">
                                        <h4>
                                            Multiband Compression</h4>
                                        <p style="color: #9ca3af; font-size: 12px; margin: 10px 0;">Multi-band dynamic compression</p>
                                        <button class="btn" onclick="applyTransform('multiband')">Apply Multiband</button>
                                    </div>

                                    <!-- Add Noise -->
                                    <div class="transform-card">
                                        <h4>
                                            Add Noise</h4>
                                        <div class="form-group">
                                            <label>Noise Type</label>
                                            <select id="noiseTypeSelect">
                                                <option value="white">White Noise</option>
                                                <option value="vinyl">Vinyl Crackle</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>SNF</label>
                                            <div class="slider-container">
                                                <div class="slider-wrapper">
                                                    <input type="range" class="slider" id="noiseSNRSlider" min="0" max="40" value="20" oninput="updateSliderDisplay('noiseSNR', this.value)">
                                                </div>
                                                <span class="slider-value" id="noiseSNRDisplay">20 dB</span>
                                            </div>
                                        </div>
                                        <button class="btn" onclick="applyTransform('addNoise')">Apply Noise</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Crop Audio -->
                            <div class="transform-subsection">
                                <h4>Crop Audio</h4>
                                <div class="transform-grid">
                                    <!-- Cropping -->
                                    <div class="transform-card">
                                        <h4>
                                            Crop Audio</h4>
                                        <div class="form-group">
                                            <label>Start Time</label>
                                            <select id="cropTypeSelect">
                                                <option value="10s">10 Seconds (start)</option>
                                                <option value="5s">5 Seconds (start)</option>
                                                <option value="middle">Middle segment</option>
                                                <option value="end">End segment</option>
                                            </select>
                                        </div>
                                        <button class="btn" onclick="applyTransform('crop')">Apply Crop</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Embedded Sample Detection -->
                            <div class="transform-subsection">
                                <h4>Embedded Sample Detection</h4>
                                <div class="transform-grid">
                                    <div class="transform-card">
                                        <h4>Embed Sample in Track</h4>
                                        <div class="form-group">
                                            <label>Sample Audio File (Song A segment)</label>
                                            <p style="color: #9ca3af; font-size: 12px; margin-bottom: 5px;">Current selection:
                                                <span id="embeddedSampleFileDisplay" style="color: #4ade80;">None</span>
                                            </p>
                                        </div>
                                        <div class="form-group">
                                            <label>Background Audio File (Full track)</label>
                                            <select id="embeddedBackgroundFile" class="form-control">
                                                <option value="">-- Select Background File --</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Position</label>
                                            <select id="embeddedPosition" class="form-control">
                                                <option value="start">Start</option>
                                                <option value="middle">Middle</option>
                                                <option value="end">End</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Sample Duration (seconds)</label>
                                            <input type="number" id="embeddedSampleDuration" class="form-control" value="1.5" min="1.0" max="2.0" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label>Volume (dB)</label>
                                            <input type="range" class="slider" id="embeddedVolumeDb" min="-12" max="6" value="0" step="0.5" oninput="document.getElementById('embeddedVolumeDbDisplay').textContent = this.value + ' dB'">
                                            <span class="slider-value" id="embeddedVolumeDbDisplay">0 dB</span>
                                        </div>
                                        <div class="form-group">
                                            <label>Apply Transform to Sample (optional)</label>
                                            <select id="embeddedApplyTransform" class="form-control">
                                                <option value="None">None</option>
                                                <option value="pitch">Pitch Shift</option>
                                                <option value="speed">Speed Change</option>
                                                <option value="eq">EQ Adjustment</option>
                                                <option value="compression">Compression</option>
                                            </select>
                                        </div>
                                        <div class="form-group" id="embeddedTransformParamsGroup" style="display: none;">
                                            <label>Transform Parameters (JSON)</label>
                                            <input type="text" id="embeddedTransformParams" class="form-control" placeholder='{"semitones": 2}' style="font-family: monospace; font-size: 11px;">
                                            <small style="color: #9ca3af;">Example: {"semitones": 2} for pitch, {"speed": 1.05} for speed, {"gain_db": 6.0} for EQ</small>
                                        </div>
                                        <button class="btn" onclick="applyTransform('embeddedSample')">Apply Embedded Sample</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Song A in Song B -->
                            <div class="transform-subsection">
                                <h4>Song A inside Song B</h4>
                                <div class="transform-grid">
                                    <div class="transform-card">
                                        <h4>Create Song B from Song A</h4>
                                        <div class="form-group">
                                            <label>Song A (Original in Database)</label>
                                            <p style="color: #9ca3af; font-size: 12px; margin-bottom: 5px;">Current selection:
                                                <span id="songAFileDisplay" style="color: #4ade80;">None</span>
                                            </p>
                                        </div>
                                        <div class="form-group">
                                            <label>Song B Base Track (optional)</label>
                                            <select id="songBBaseFile" class="form-control">
                                                <option value="">-- Generate Synthetic Background --</option>
                                            </select>
                                            <small style="color: #9ca3af;">Leave empty to generate synthetic background</small>
                                        </div>
                                        <div class="form-group">
                                            <label>Sample Start Time (seconds)</label>
                                            <input type="number" id="songASampleStartTime" class="form-control" value="0.0" min="0" step="0.5">
                                        </div>
                                        <div class="form-group">
                                            <label>Sample Duration (seconds)</label>
                                            <input type="number" id="songASampleDuration" class="form-control" value="1.5" min="1.0" max="2.0" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label>Song B Duration (seconds)</label>
                                            <input type="number" id="songBDuration" class="form-control" value="30.0" min="10" max="120" step="5">
                                        </div>
                                        <div class="form-group">
                                            <label>Mix Volume (dB)</label>
                                            <input type="range" class="slider" id="songAMixVolumeDb" min="-12" max="6" value="0" step="0.5" oninput="document.getElementById('songAMixVolumeDbDisplay').textContent = this.value + ' dB'">
                                            <span class="slider-value" id="songAMixVolumeDbDisplay">0 dB</span>
                                        </div>
                                        <div class="form-group">
                                            <label>Apply Transform to Sample (optional)</label>
                                            <select id="songAApplyTransform" class="form-control">
                                                <option value="None">None</option>
                                                <option value="pitch">Pitch Shift</option>
                                                <option value="speed">Speed Change</option>
                                                <option value="eq">EQ Adjustment</option>
                                                <option value="compression">Compression</option>
                                            </select>
                                        </div>
                                        <div class="form-group" id="songATransformParamsGroup" style="display: none;">
                                            <label>Transform Parameters (JSON)</label>
                                            <input type="text" id="songATransformParams" class="form-control" placeholder='{"semitones": -2, "position": "start"}' style="font-family: monospace; font-size: 11px;">
                                            <small style="color: #9ca3af;">Example: {"semitones": -2, "position": "start"} - position can be "start", "middle", or "end"</small>
                                        </div>
                                        <button class="btn" onclick="applyTransform('songAInSongB')">Create Song B</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Panel: Audio Playback Interface -->
                        <div class="manipulate-right-panel">
                            <!-- 1. Load Audio File -->
                            <div class="workflow-step">
                                <h3 style="color: #22D2E6; margin-bottom: 15px;">1. Load Audio File</h3>
                                <div class="form-group">
                                    <label>Browse Audio Files</label>
                                    <div class="file-select-container">
                                        <select id="manipulateAudioFile" onchange="loadAudioInfo()">
                                            <option value="">- Select Audio File -</option>
                                        </select>
                                        <button class="clear-btn" onclick="clearAudioSelection()">Clear</button>
                                    </div>
                                </div>
                                <div class="form-group" style="margin-top: 15px;">
                                    <div class="upload-area" id="manipulateUploadArea" ondrop="handleManipulateDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('manipulateFileInput').click()">
                                        <div class="upload-area-cloud"><img src="/static/img/file_upload.png" alt="Upload"></div>
                                        <p style="margin: 0; color: #9ca3af; word-break: break-word; overflow-wrap: break-word; padding: 0 10px;">Drag and drop audio file here or click to browse</p>
                                        <button class="btn" style="margin-top: 15px; padding: 8px 20px; font-size: 12px;">Browse</button>
                                        <input type="file" id="manipulateFileInput" style="display: none;" accept="audio/*" onchange="handleManipulateFileSelect(event)">
                                    </div>
                                </div>
                            </div>

                            <!-- Audio Players -->
                            <div class="audio-players-container">
                                <div class="audio-player-panel">
                                    <h4>Original Audio</h4>
                                    <p class="audio-player-status" id="originalPlayerInfo">No audio loaded.</p>
                                    <div class="audio-player-waveform" id="originalWaveform">
                                        <canvas class="frequency-canvas" id="originalFrequencyCanvas"></canvas>
                                    </div>
                                    <div class="audio-player-controls">
                                        <button id="originalPlayBtn" class="audio-play-btn" onclick="toggleOriginalPlayback()"></button>
                                        <span class="audio-time-display" id="originalTimeLabel">00:00 / 00:00</span>
                                    </div>
                                    <audio id="originalAudioPlayer" style="display: none;" ontimeupdate="updateOriginalTime()" onloadedmetadata="updateOriginalDuration()"></audio>
                                </div>
                                <div class="audio-player-panel">
                                    <h4>Transformed Audio</h4>
                                    <p class="audio-player-status" id="transformedPlayerInfo">No transformed audio available.</p>
                                    <div class="audio-player-waveform" id="transformedWaveform">
                                        <canvas class="frequency-canvas" id="transformedFrequencyCanvas"></canvas>
                                    </div>
                                    <div class="audio-player-controls">
                                        <button id="transformedPlayBtn" class="audio-play-btn" onclick="toggleTransformedPlayback()" disabled></button>
                                        <span class="audio-time-display" id="transformedTimeLabel">00:00 / 00:00</span>
                                    </div>
                                    <audio id="transformedAudioPlayer" style="display: none;" ontimeupdate="updateTransformedTime()" onloadedmetadata="updateTransformedDuration()"></audio>
                                </div>
                            </div>

                            <!-- Test Sections -->
                            <div class="workflow-step">
                                <h3 style="color: #22D2E6; margin-bottom: 15px;">3. Test Fingerprint Robustness</h3>
                                <div style="margin-bottom: 15px;">
                                    <p style="color: #9ca3af; font-size: 12px; margin-bottom: 8px;">
                                        <strong style="color: #ffffff;">Original Audio:</strong>
                                        <span id="originalTestStatus">No original audio selected.</span>
                                    </p>
                                    <p style="color: #9ca3af; font-size: 12px; margin: 0;">
                                        <strong style="color: #ffffff;">Transformed Audio:</strong>
                                        <span id="transformedTestStatus">No transformed audio available. Apply transforms first.</span>
                                    </p>
                                    <input type="hidden" id="originalTestDisplay">
                                    <input type="hidden" id="transformedTestDisplay">
                                </div>
                                <button class="btn btn-success" id="testBtn" onclick="testFingerprintRobustness()">Test Fingerprint Match</button>
                            </div>

                            <div class="workflow-step">
                                <h3 style="color: #22D2E6; margin-bottom: 15px;">4. Test Results</h3>
                                <div id="testResults" class="test-results-log" style="display: block;">
                                    <div id="testResultsContent">
                                        <div class="log-entry">
                                            <span class="log-timestamp">09:30:01</span>
                                            <span>- System initialized.</span>
                                        </div>
                                        <div class="log-entry">
                                            <span class="log-timestamp">09:30:05</span>
                                            <span>- Ready for audio input.</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="manipulateLogs" class="log-container" style="display: none; margin-top: 20px;"></div>
                </div>

                <!-- Deliverables Section -->
                <div id="deliverables" class="section active">
                    <h2 style="display: flex; align-items: center; gap: 10px; word-break: break-word; overflow-wrap: break-word; flex-wrap: wrap;"><img src="/static/img/deliverable.png" alt="Deliverables" style="width: 24px; height: 24px; flex-shrink: 0;">Deliverables & Reports</h2>
                    <p style="margin-bottom: 20px; color: #9ca3af; word-break: break-word; overflow-wrap: break-word;">
                        Configure transformations and generate comprehensive Phase 1 and Phase 2 test reports.
                    </p>

                    <!-- Section 1: Select Audio File -->
                    <div class="workflow-step" style="margin-bottom: 20px;">
                        <h3 style="word-break: break-word; overflow-wrap: break-word;">1. Select Audio File</h3>

                        <!-- Browser existing files -->
                        <div class="form-group">
                            <label>Browse Audio Files</label>
                            <select id="deliverablesAudioSelect" class="form-control" onchange="loadDeliverablesAudioInfo(this.value)">
                                <option value="">-- Select Audio File --</option>
                            </select>
                        </div>

                        <!-- Upload new file -->
                        <div class="form-group" style="margin-top: 15px;">
                            <label>Or Upload Audio File</label>
                            <div class="upload-area" id="deliverablesUploadArea" ondrop="handleDeliverablesDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('deliverablesFileInput').click()">
                                <div class="upload-area-cloud"><img src="/static/img/file_upload.png" alt="Upload"></div>
                                <p style="margin: 10px 0; color: #9ca3af; word-break: break-word; overflow-wrap: break-word; padding: 0 10px;">Drag and drop audio file here or click to browse</p>
                                <input type="file" id="deliverablesFileInput" style="display: none;" accept="audio/*" onchange="handleDeliverablesFileSelect(event)">
                            </div>
                        </div>

                        <div id="deliverablesAudioInfo" style="margin-top: 15px; padding: 15px; background: #1e1e1e; border-radius: 5px; border: 1px solid #3d3d3d;">
                            <p style="margin: 0;">
                                <strong>Selected:</strong>
                                <span id="deliverablesSelectedFileName"></span>
                            </p>
                            <p style="margin: 5px 0 0 0;">
                                <strong>Path:</strong>
                                <span id="deliverablesSelectedFilePath"></span>
                            </p>
                        </div>
                    </div>

                    <!-- Section 2: Configure Transformations (Quick Single Run) -->
                    <div class="workflow-step" style="margin-bottom: 20px;">
                        <h3 style="color: #22D2E6; font-size: 20px; font-weight: 600; margin-bottom: 10px; word-break: break-word;">2. Configure Transformations (Quick Single Run)</h3>
                        <p style="color: #9ca3af; margin-bottom: 15px; font-size: 12px;">
                            This is a quick single run only. Does not generate full Phase 1/Phase 2 matrix reportsuse the "Full Test Suites" buttons below for that.
                        </p>

                        <div class="transform-tabs-container">
                            <!-- Tab Navigation -->
                            <div class="transform-tabs">
                                <button class="transform-tab active" onclick="switchTransformTab('core', event); return false;">Core</button>
                                <button class="transform-tab" onclick="switchTransformTab('filtering', event); return false;">Filtering & Dynamics</button>
                                <button class="transform-tab" onclick="switchTransformTab('encoding', event); return false;">Encoding & Mixing</button>
                                <button class="transform-tab" onclick="switchTransformTab('advanced', event); return false;">Advanced Detection</button>
                                <button class="transform-tab" onclick="switchTransformTab('noise', event); return false;">Noise & Time</button>
                            </div>

                            <!-- Core Tab Content -->
                            <div id="transformTabCore" class="transform-tab-content active">
                                <div class="transform-group-panel">
                                    <h4>Basic Transformations</h4>
                                    <div class="transform-grid">
                                        <!-- Speed Control -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Speed Change</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesSpeedEnabled" onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesSpeedEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Speed Ratio</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesSpeedSlider" min="50" max="200" value="100" step="1" oninput="updateDeliverablesSpeedValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesSpeedValue">1.0x</span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>
                                                    <input type="checkbox" id="deliverablesPreservePitch">
                                                    Preserve Pitch
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Pitch Control -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Pitch Shift</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesPitchEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesPitchEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Semitones</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesPitchSlider" min="-12" max="12" value="0" step="0.1" oninput="updateDeliverablesPitchValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesPitchValue">0.0</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Reverb -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Reverb Delay</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesReverbEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesReverbEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Delay (ms)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesReverbSlider" min="0" max="500" value="50" step="1" oninput="updateDeliverablesReverbValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesReverbValue">50.0ms</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Noise Reduction -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Noise Reduction</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesNoiseEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesNoiseEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Reduction (%)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesNoiseSlider" min="0" max="100" value="50" oninput="updateDeliverablesNoiseValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesNoiseValue">50%</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- EQ Adjustment -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    EQ Adjustment</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesEQEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesEQEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Gain (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesEQSlider" min="-20" max="20" value="0" step="0.1" oninput="updateDeliverablesEQValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesEQValue">0.0dB</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtering & Dynamics Tab Content -->
                            <div id="transformTabFiltering" class="transform-tab-content">
                                <div class="transform-group-panel">
                                    <h4>Frequency Filters</h4>
                                    <div class="transform-grid">
                                        <!-- High-Pass Filter -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    High-Pass Filter</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesHighpassEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesHighpassEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Frequency (Hz)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesHighpassSlider" min="50" max="5000" value="150" step="1" oninput="updateDeliverablesSliderDisplay('highpass', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesHighpassDisplay">150.0Hz</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Low-Pass Filter -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Low-Pass Filter</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesLowpassEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesLowpassEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Frequency (Hz)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesLowpassSlider" min="500" max="20000" value="6000" step="1" oninput="updateDeliverablesSliderDisplay('lowpass', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesLowpassDisplay">6000.0Hz</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Boost Highs -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Boost Highs</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesBoostHighsEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesBoostHighsEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Gain (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesBoostHighsSlider" min="0" max="20" value="6" step="0.1" oninput="updateDeliverablesSliderDisplay('boostHighs', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesBoostHighsDisplay">6.0dB</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Boost Lows -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Boost Lows</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesBoostLowsEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesBoostLowsEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Gain (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesBoostLowsSlider" min="0" max="20" value="6" step="0.1" oninput="updateDeliverablesSliderDisplay('boostLows', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesBoostLowsDisplay">6.0dB</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Telephone Filter -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Telephone Filter</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesTelephoneEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesTelephoneEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Low Freq (Hz)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesTelephoneLowSlider" min="100" max="2000" value="300" step="1" oninput="updateDeliverablesSliderDisplay('telephoneLow', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesTelephoneLowDisplay">300.0Hz</span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>High Freq (Hz)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesTelephoneHighSlider" min="1000" max="8000" value="3000" step="1" oninput="updateDeliverablesSliderDisplay('telephoneHigh', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesTelephoneHighDisplay">3000.0Hz</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="transform-group-panel">
                                    <h4>Dynamic Processing</h4>
                                    <div class="transform-grid">
                                        <!-- Limiting -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Limiting</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesLimitingEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesLimitingEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Ceiling (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesLimitingSlider" min="-10" max="0" value="-1" step="0.1" oninput="updateDeliverablesSliderDisplay('limiting', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesLimitingDisplay">-1.0dB</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Multiband Compression -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Multiband Compression</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesMultibandEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesMultibandEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <p style="color: #9ca3af; font-size: 12px; margin: 10px 0;">(Controls for multiband compression go here.)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Encoding & Mixing Tab Content -->
                            <div id="transformTabEncoding" class="transform-tab-content">
                                <div class="transform-group-panel">
                                    <h4>Encoding & Format</h4>
                                    <div class="transform-grid">
                                        <!-- Audio Compression -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Audio Compression</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesCompressionEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesCompressionEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Codec</label>
                                                <select id="deliverablesCodecSelect" onchange="updateDeliverablesBitrateEnabled()">
                                                    <option value="None">None</option>
                                                    <option value="MP3" selected>MP3</option>
                                                    <option value="AAC">AAC</option>
                                                    <option value="OGG">OGG</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Bitrate</label>
                                                <select id="deliverablesBitrateSelect">
                                                    <option value="64k" selected>64k</option>
                                                    <option value="128k">128k</option>
                                                    <option value="192k">192k</option>
                                                    <option value="256k">256k</option>
                                                    <option value="320k">320k</option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Overlay/Mixing -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Overlay/Mixing</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesOverlayEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesOverlayEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Overlay Audio File (optional)</label>
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <button class="clear-btn" onclick="document.getElementById('deliverablesOverlayFile').click()" style="flex: 1; text-align: left;">Choose File</button>
                                                    <span id="deliverablesOverlayFileName" style="font-size: 12px; color: #9ca3af;">No file chosen</span>
                                                </div>
                                                <input type="file" id="deliverablesOverlayFile" accept="audio/*" style="display: none;" onchange="updateDeliverablesOverlayFileName()">
                                                <small style="color: #9ca3af;">Leave empty to generate test overlay</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Gain (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesOverlayGainSlider" min="-20" max="0" value="-6" step="0.1" oninput="updateDeliverablesOverlayGainValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesOverlayGainValue">-6.0dB</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="transform-group-panel">
                                    <h4>Audio Mixing</h4>
                                    <div class="transform-grid">
                                        <!-- Overlay/Mixing -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Overlay/Mixing</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesOverlayEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesOverlayEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Overlay Audio File (optional)</label>
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <button class="clear-btn" onclick="document.getElementById('deliverablesOverlayFile').click()" style="flex: 1; text-align: left;">Choose File</button>
                                                    <span id="deliverablesOverlayFileName" style="font-size: 12px; color: #9ca3af;">No file chosen</span>
                                                </div>
                                                <input type="file" id="deliverablesOverlayFile" accept="audio/*" style="display: none;" onchange="updateDeliverablesOverlayFileName()">
                                                <small style="color: #9ca3af;">Leave empty to generate test overlay</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Gain (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesOverlayGainSlider" min="-20" max="0" value="-6" step="0.1" oninput="updateDeliverablesOverlayGainValue(this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesOverlayGainValue">-6.0dB</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Advanced Detection Tab Content -->
                            <div id="transformTabAdvanced" class="transform-tab-content">
                                <div class="transform-group-panel">
                                    <h4>Complex Detection Scenarios</h4>
                                    <div class="transform-grid">
                                        <!-- Embedded Sample Detection -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>Embedded Sample Detection</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesEmbeddedSampleEnabled" onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesEmbeddedSampleEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Sample File (Song A segment) *</label>
                                                <select id="deliverablesEmbeddedSampleFile" class="form-control" onchange="updateDeliverablesTransformState()">
                                                    <option value="">-- Select Sample File --</option>
                                                </select>
                                                <small style="color: #9ca3af;">Required: 1-2 second sample to embed</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Background File (Full track)</label>
                                                <select id="deliverablesEmbeddedBackgroundFile" class="form-control" onchange="updateDeliverablesTransformState()">
                                                    <option value="">-- Use Chain Output --</option>
                                                </select>
                                                <small style="color: #9ca3af;">Leave empty to use output from previous transform</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Position</label>
                                                <select id="deliverablesEmbeddedPosition" class="form-control">
                                                    <option value="start">Start</option>
                                                    <option value="middle">Middle</option>
                                                    <option value="end">End</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Sample Duration (seconds)</label>
                                                <input type="number" id="deliverablesEmbeddedSampleDuration" class="form-control" value="1.5" min="1.0" max="2.0" step="0.1">
                                            </div>
                                            <div class="form-group">
                                                <label>Volume (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesEmbeddedVolumeDb" min="-12" max="6" value="0" step="0.5" oninput="updateDeliverablesSliderDisplay('embeddedVolumeDb', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesEmbeddedVolumeDbDisplay">0.0dB</span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Apply Transform to Sample (optional)</label>
                                                <select id="deliverablesEmbeddedApplyTransform" class="form-control" onchange="toggleDeliverablesEmbeddedTransformParams()">
                                                    <option value="None">None</option>
                                                    <option value="pitch">Pitch Shift</option>
                                                    <option value="speed">Speed Change</option>
                                                    <option value="eq">EQ Adjustment</option>
                                                    <option value="compression">Compression</option>
                                                </select>
                                            </div>
                                            <div class="form-group" id="deliverablesEmbeddedTransformParamsGroup" style="display: none;">
                                                <label>Transform Parameters (JSON)</label>
                                                <input type="text" id="deliverablesEmbeddedTransformParams" class="form-control" placeholder='{"semitones": 2}' style="font-family: monospace; font-size: 11px;">
                                                <small style="color: #9ca3af;">Example: {"semitones": 2} for pitch, {"speed": 1.05} for speed, {"gain_db": 6.0} for EQ</small>
                                            </div>
                                        </div>

                                        <!-- Song A in Song B -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>Song A inside Song B</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesSongAInSongBEnabled" onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesSongAInSongBEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Song A (Original in Database)</label>
                                                <select id="deliverablesSongAFile" class="form-control" onchange="updateDeliverablesTransformState()">
                                                    <option value="">-- Use Original Input --</option>
                                                </select>
                                                <small style="color: #9ca3af;">Leave empty to use original input file</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Song B Base Track (optional)</label>
                                                <select id="deliverablesSongBBaseFile" class="form-control" onchange="updateDeliverablesTransformState()">
                                                    <option value="">-- Generate Synthetic Background --</option>
                                                </select>
                                                <small style="color: #9ca3af;">Leave empty to generate synthetic background</small>
                                            </div>
                                            <div class="form-group">
                                                <label>Sample Start Time (seconds)</label>
                                                <input type="number" id="deliverablesSongASampleStartTime" class="form-control" value="0.0" min="0" step="0.5">
                                            </div>
                                            <div class="form-group">
                                                <label>Sample Duration (seconds)</label>
                                                <input type="number" id="deliverablesSongASampleDuration" class="form-control" value="1.5" min="1.0" max="2.0" step="0.1">
                                            </div>
                                            <div class="form-group">
                                                <label>Song B Duration (seconds)</label>
                                                <input type="number" id="deliverablesSongBDuration" class="form-control" value="30.0" min="10" max="120" step="5">
                                            </div>
                                            <div class="form-group">
                                                <label>Mix Volume (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesSongAMixVolumeDb" min="-12" max="6" value="0" step="0.5" oninput="updateDeliverablesSliderDisplay('songAMixVolumeDb', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesSongAMixVolumeDbDisplay">0.0dB</span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Apply Transform to Sample (optional)</label>
                                                <select id="deliverablesSongAApplyTransform" class="form-control" onchange="toggleDeliverablesSongATransformParams()">
                                                    <option value="None">None</option>
                                                    <option value="pitch">Pitch Shift</option>
                                                    <option value="speed">Speed Change</option>
                                                    <option value="eq">EQ Adjustment</option>
                                                    <option value="compression">Compression</option>
                                                </select>
                                            </div>
                                            <div class="form-group" id="deliverablesSongATransformParamsGroup" style="display: none;">
                                                <label>Transform Parameters (JSON)</label>
                                                <input type="text" id="deliverablesSongATransformParams" class="form-control" placeholder='{"semitones": -2, "position": "start"}' style="font-family: monospace; font-size: 11px;">
                                                <small style="color: #9ca3af;">Example: {"semitones": -2, "position": "start"} - position can be "start", "middle", or "end"</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Noise & Time Tab Content -->
                            <div id="transformTabNoise" class="transform-tab-content">
                                <div class="transform-group-panel">
                                    <h4>Noise & Artifacts</h4>
                                    <div class="transform-grid">
                                        <!-- Add Noise -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Add Noise</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesAddNoiseEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesAddNoiseEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Noise Type</label>
                                                <select id="deliverablesNoiseTypeSelect">
                                                    <option value="white" selected>White Noise</option>
                                                    <option value="vinyl">Vinyl Crackle</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>SNR (dB)</label>
                                                <div class="slider-container">
                                                    <div class="slider-wrapper">
                                                        <input type="range" class="slider" id="deliverablesNoiseSNRSlider" min="0" max="40" value="20" step="0.1" oninput="updateDeliverablesSliderDisplay('noiseSNR', this.value)">
                                                    </div>
                                                    <span class="slider-value" id="deliverablesNoiseSNRDisplay">20.0dB</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="transform-group-panel">
                                    <h4>Time Manipulation</h4>
                                    <div class="transform-grid">
                                        <!-- Crop Audio -->
                                        <div class="transform-card">
                                            <div class="transform-card-header">
                                                <h4>
                                                    Crop Audio</h4>
                                                <div class="enable-checkbox">
                                                    <input type="checkbox" id="deliverablesCropEnabled" checked onchange="updateDeliverablesTransformState()">
                                                    <label for="deliverablesCropEnabled">Enable</label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Crop Type</label>
                                                <select id="deliverablesCropTypeSelect" onchange="updateDeliverablesCropDuration()">
                                                    <option value="10s">10 seconds from start</option>
                                                    <option value="5s">5 seconds from start</option>
                                                    <option value="middle">Middle segment</option>
                                                    <option value="end">End segment</option>
                                                </select>
                                            </div>
                                            <div class="form-group" id="deliverablesCropDurationGroup" style="display: none;">
                                                <label>Duration (seconds)</label>
                                                <input type="number" id="deliverablesCropDuration" value="10" min="1" max="60" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section 3: Full Test Suites -->
                    <div class="workflow-step" style="margin-bottom: 20px;">
                        <h3>3. Full Test Suites (Generate Real Phase 1 / Phase 2 Reports)</h3>
                        <p style="color:#9ca3af; margin-bottom:15px; font-size:12px;">Runs the complete test matrices and produces comprehensive reports.</p>
                        <div style="display:flex; gap:10px; flex-wrap:wrap;">
                            <button class="btn btn-primary" onclick="runPhaseSuite('phase1')">Run Phase 1 Suite</button>
                            <button class="btn btn-success" onclick="runPhaseSuite('phase2')">Run Phase 2 Suite</button>

                        </div>
                    </div>

                    <!-- Other Reports -->
                    <div class="workflow-step" style="margin-bottom: 20px;">
                        <h3>Phase 1 & Phase 2 Reports</h3>
                        <div id="deliverablesList" style="margin-top: 20px;">
                            <p style="color: #9ca3af;">Loading deliverables...</p>
                        </div>
                    </div>

                    <!-- Report Details -->
                    <div class="workflow-step">
                        <h3>Report Details</h3>
                        <div id="reportViewer" style="margin-top: 15px;">
                            <p style="color: #9ca3af;">Select a report to view detailed metrics.</p>
                        </div>
                    </div>
                </div>

                <!-- DAW Parser Section -->
                <div id="daw" class="section">
                    <h2 style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <img src="/static/img/gear.png" alt="DAW Parser" style="width: 24px; height: 24px;">
                        DAW Project File Parser
                    </h2>
                    <p style="color: #9ca3af; margin-bottom: 30px;">Upload and parse DAW project files (.als, .flp, .logicx) to extract compositional metadata including MIDI data, arrangement, tempo changes, plugin chains, and automation</p>

                    <!-- Upload Area -->
                    <div class="workflow-step" style="margin-bottom: 30px;">
                        <h3>Upload DAW Project File</h3>
                        <div class="daw-upload-area" id="dawUploadArea" ondrop="handleDAWDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('dawFileInput').click()">
                            <div style="margin-bottom: 15px;"><img src="/static/img/file_upload.png" alt="Upload" style="width: 64px; height: 64px; display: block; margin: 0 auto; opacity: 0.8;"></div>
                            <p style="margin: 0; color: #ffffff; font-weight: 500; margin-bottom: 8px;">Drag and drop DAW project file here</p>
                            <p style="margin: 0; color: #9ca3af; font-size: 13px; margin-bottom: 15px;">Supports: .als (Ableton Live), .flp (FL Studio), .logicx (Logic Pro)</p>
                            <button class="btn" style="margin-top: 10px; padding: 10px 24px; font-size: 14px;">Browse Files</button>
                            <input type="file" id="dawFileInput" style="display: none;" accept=".als,.flp,.logicx,.logic" onchange="handleDAWFileSelect(event)">
                        </div>
                    </div>

                    <!-- Content Grid: Files List and Metadata Side by Side -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- DAW Files List -->
                        <div class="workflow-step">
                            <h3 style="display: flex; align-items: center; gap: 8px;">
                                DAW Files
                            </h3>
                            <div class="daw-file-list" id="dawFileList" style="margin-top: 15px; min-height: 200px;">
                                <div style="color: #9ca3af; text-align: center; padding: 40px 20px;">
                                    <div style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></div>
                                    <p style="margin: 0;">No DAW files uploaded yet</p>
                                    <p style="margin: 8px 0 0 0; font-size: 12px; opacity: 0.7;">Upload a file to get started</p>
                                </div>
                            </div>
                        </div>

                        <!-- Metadata Viewer -->
                        <div class="workflow-step">
                            <h3 style="display: flex; align-items: center; gap: 8px;">
                                DAW Metadata
                            </h3>
                            <div class="daw-metadata-view" id="dawMetadataView" style="margin-top: 15px; min-height: 200px;">
                                <div style="color: #9ca3af; text-align: center; padding: 40px 20px;">
                                    <div style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></div>
                                    <p style="margin: 0;">Select a DAW file to view metadata</p>
                                    <p style="margin: 8px 0 0 0; font-size: 12px; opacity: 0.7;">Parse a file to see extracted data</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Define switchTransformTab BEFORE app.js loads to ensure it's available for onclick handlers
        function switchTransformTab(tabName, event) {
            console.log('switchTransformTab called with:', tabName);

            // Hide all tab contents
            const allTabContents = document.querySelectorAll('.transform-tab-content');
            allTabContents.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all tabs
            const allTabs = document.querySelectorAll('.transform-tab');
            allTabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            const tabId = 'transformTab' + tabName.charAt(0).toUpperCase() + tabName.slice(1);
            console.log('Looking for tab content:', tabId);
            const targetTabContent = document.getElementById(tabId);
            if (targetTabContent) {
                targetTabContent.classList.add('active');
                console.log('Activated tab content:', tabId);
            } else {
                console.error('Tab content not found:', tabId);
                console.log('Available tab contents:', Array.from(document.querySelectorAll('.transform-tab-content')).map(t => t.id));
            }

            // Activate clicked tab button
            if (event && event.target) {
                event.target.classList.add('active');
            } else { // Fallback: find tab by onclick attribute
                allTabs.forEach(tab => {
                    const onclick = tab.getAttribute('onclick');
                    if (onclick && onclick.includes("'" + tabName + "'")) {
                        tab.classList.add('active');
                    }
                });
            }

            return false; // Prevent default behavior
        }

        // Make it globally accessible immediately
        window.switchTransformTab = switchTransformTab;
    </script>
    <script src="/static/app.js"></script>
    <script>
        function hideSectionsInManipulate() {
            const manipulateSection = document.getElementById("manipulate");
            if (!manipulateSection)
                return;



            const subsections = manipulateSection.querySelectorAll(".transform-subsection");
            subsections.forEach(subsection => {
                const h4 = subsection.querySelector("h4");
                if (h4) {
                    const text = h4.textContent || h4.innerText || "";
                    if (text.includes("Embedded Sample Detection") || text.includes("Song A inside Song B")) {
                        subsection.style.display = "none";
                    }
                }
            });
        }
        document.addEventListener("DOMContentLoaded", function() {
            hideSectionsInManipulate();
            // Ensure default section (deliverables) is shown on page load
            // Note: CSS .section.active handles visibility, don't set inline styles
            const defaultSection = document.getElementById('deliverables');
            if (defaultSection && defaultSection.classList.contains('active')) {
                // CSS will handle display via .active class, no need for inline style
                // defaultSection.style.display = 'block'; // Removed - causes overlap issues
            }
        });
        setTimeout(function() {
            if (typeof window.showSection === "function") {
                const original = window.showSection;
                window.showSection = function(sectionId, eventElement) {
                    original(sectionId, eventElement);
                    if (sectionId === "manipulate") {
                        setTimeout(hideSectionsInManipulate, 100);
                    }
                };
            }
        }, 500);
    </script>
    <script>
        // Slider value update functions
        function updateSpeedValue(value) {
            const speedValueEl = document.getElementById('speedValue');
            if (speedValueEl) {
                speedValueEl.textContent = (value / 100).toFixed(0) + 'x';
            }
        }

        function updatePitchValue(value) {
            const pitchValueEl = document.getElementById('pitchValue');
            if (pitchValueEl) {
                pitchValueEl.textContent = value + ' semitones';
            }
        }

        function updateReverbValue(value) {
            const reverbValueEl = document.getElementById('reverbValue');
            if (reverbValueEl) {
                reverbValueEl.textContent = value + ' ms';
            }
        }

        function updateNoiseValue(value) {
            const noiseValueEl = document.getElementById('noiseValue');
            if (noiseValueEl) {
                noiseValueEl.textContent = value + '%';
            }
        }

        function updateEQValue(value) {
            const eqValueEl = document.getElementById('eqValue');
            if (eqValueEl) {
                eqValueEl.textContent = value == 0 ? '0 dB' : value + ' dB';
            }
        }

        function updateOverlayGainValue(value) {
            const overlayGainValueEl = document.getElementById('overlayGainValue');
            if (overlayGainValueEl) {
                overlayGainValueEl.textContent = value + ' dB';
            }
        }

        function updateBitrateEnabled() {
            const codec = document.getElementById('codecSelect');
            const bitrate = document.getElementById('bitrateSelect');
            if (codec && bitrate) {
                bitrate.disabled = codec.value === 'None';
            }
        }
    </script>

    <!-- Progress Modal -->
    <div id="progressModal" class="progress-modal" style="display: none;">
        <div class="progress-modal-content">
            <div class="progress-modal-header">
                <h2>Generating Reports</h2>
                <button id="progressModalClose" class="progress-modal-close" onclick="closeProgressModal()"></button>
            </div>
            <div class="progress-modal-body">
                <div class="progress-indicators">
                    <div class="progress-indicator">
                        <div class="progress-circle-container">
                            <svg class="progress-circle" width="120" height="120">
                                <circle class="progress-circle-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="progress-circle-fill overall" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="progress-text">
                                <div class="progress-percentage" id="overallPercentage">0%</div>
                                <div class="progress-status" id="overallStatus">Waiting...</div>
                            </div>
                        </div>
                        <div class="progress-label">Overall Progress</div>
                    </div>
                    <div class="progress-indicator">
                        <div class="progress-circle-container">
                            <svg class="progress-circle" width="120" height="120">
                                <circle class="progress-circle-bg" cx="60" cy="60" r="54"></circle>
                                <circle class="progress-circle-fill step" cx="60" cy="60" r="54"></circle>
                            </svg>
                            <div class="progress-text">
                                <div class="progress-percentage" id="stepPercentage">0%</div>
                                <div class="progress-status" id="stepStatus">Waiting...</div>
                            </div>
                        </div>
                        <div class="progress-label">Current Step</div>
                    </div>
                </div>
                <div class="progress-info">
                    <div class="current-step" id="currentStep">Initializing...</div>
                    <div class="time-info" id="timeInfo">Time elapsed: 00:00:00</div>
                </div>
            </div>
            <div class="progress-modal-footer">
                <button id="progressCancelBtn" class="btn btn-secondary" onclick="cancelProgress()">Cancel</button>
                <div class="update-info">Updating every 1-2s.</div>
            </div>
        </div>
    </div>

    <style>
        .progress-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .progress-modal-content {
            background: #ffffff;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .progress-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
        }

        .progress-modal-header h2 {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }

        .progress-modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: #9ca3af;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .progress-modal-close:hover:not(:disabled) {
            background: #f3f4f6;
            color: #374151;
        }

        .progress-modal-close:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .progress-modal-body {
            padding: 32px 24px;
        }

        .progress-indicators {
            display: flex;
            justify-content: space-around;
            gap: 40px;
            margin-bottom: 32px;
        }

        .progress-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .progress-circle-container {
            position: relative;
            margin-bottom: 12px;
        }

        .progress-circle {
            transform: rotate(-90deg);
        }

        .progress-circle-bg {
            fill: none;
            stroke: #e5e7eb;
            stroke-width: 8;
        }

        .progress-circle-fill {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.3s ease;
        }

        .progress-circle-fill.overall {
            stroke: #427eea;
        }

        .progress-circle-fill.step {
            stroke: #10b981;
        }

        .progress-circle-fill.pending {
            stroke: #9ca3af;
        }

        .progress-circle-fill.error {
            stroke: #f87171;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .progress-percentage {
            font-size: 24px;
            font-weight: 600;
            color: #111827;
            line-height: 1.2;
        }

        .progress-status {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }

        .progress-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .progress-info {
            text-align: center;
        }

        .current-step {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 8px;
        }

        .time-info {
            font-size: 14px;
            color: #6b7280;
        }

        .progress-modal-footer {
            padding: 20px 24px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .update-info {
            font-size: 12px;
            color: #9ca3af;
        }

        @media(max-width: 640px) {
            .progress-indicators {
                flex-direction: column;
                gap: 24px;
            }
        }

        /* DAW Parser Section Styles */
        .daw-upload-area {
            border: 2px dashed #3d3d3d;
            border-radius: 8px;
            padding: 50px 40px;
            text-align: center;
            background: linear-gradient(135deg, #1e1e1e 0%, #252525 100%);
            margin: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .daw-upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(66, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .daw-upload-area:hover::before {
            left: 100%;
        }

        .daw-upload-area:hover {
            border-color: #427eea;
            background: linear-gradient(135deg, #252525 0%, #2a2a2a 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 126, 234, 0.2);
        }

        .daw-upload-area.dragover {
            border-color: #427eea;
            background: linear-gradient(135deg, #2a2a2a 0%, #2d2d2d 100%);
            transform: scale(1.02);
        }

        .daw-file-list {
            margin-top: 0;
        }

        @media(max-width: 1200px) {
            #daw>div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
            }
        }

        .daw-file-item {
            background: #2d2d2d;
            border: 1px solid #3d3d3d;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .daw-file-info {
            flex: 1;
        }

        .daw-file-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .daw-file-meta {
            font-size: 12px;
            color: #9ca3af;
        }

        .daw-metadata-view {
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            max-height: none;
            overflow-y: visible;
        }

        .daw-stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #3d3d3d;
        }

        .daw-stat-label {
            color: #9ca3af;
        }

        .daw-stat-value {
            color: #ffffff;
            font-weight: 600;
        }
    </style>

</body>

</html>